UPDATE HJ_User SET AgentID = 'dkiki111', AgentName = 'dkiki111', site = 'djbet158.com', comefrom = 'djbet158.com' WHERE username = '888erlong247'
UPDATE HJ_Finance SET AgentID = 'dkiki111' WHERE username = '888erlong247'
UPDATE HJ_Betting SET AgentID = 'dkiki111' WHERE username = '888erlong247'

UPDATE HJ_User SET AgentID = 'djimmy1995', AgentName = 'djimmy1995', site = 'www.8866win.com', comefrom = 'www.8866win.com' WHERE username = '888likexin88'
UPDATE HJ_Finance SET AgentID = 'djimmy1995' WHERE username = '888likexin88'
UPDATE HJ_Betting SET AgentID = 'djimmy1995' WHERE username = '888likexin88'

DECLARE @TargetId INT = 112314
DECLARE @AgName NVARCHAR(50) = 'dkiki111'; 
DECLARE @OriginalUpdateDate DATETIME;
DECLARE @ReturnFlag int;
DECLARE @ReturnInfo nvarchar(100);

UPDATE HJ_AgReport SET status = 0 WHERE id = @TargetId;
SELECT @OriginalUpdateDate = updateDate FROM HJ_AgReport WHERE id = @TargetId;

-- 执行存储过程并传递参数
EXECUTE dbo.usp_UpdateAgReport 
    @agName = @AgName,
    @reportName = '2025-07',
    @reportStartDate = '2025-07-01',
    @reportEndDate = '2025-07-31',
    @isCurrent = 1,
    @ReturnFlag = @ReturnFlag OUTPUT,
    @ReturnInfo = @ReturnInfo OUTPUT;

UPDATE HJ_AgReport SET updateDate = @OriginalUpdateDate,status = 3,theBrokerage = 16158.89,brokerage=17111.66 WHERE id = @TargetId;